{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
    <h1 class="text-2xl font-bold text-slate-900 tracking-tight">Websites</h1>
    <a href="/sites/new" class="inline-flex items-center justify-center rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
        Add Site
    </a>
</div>
<div class="mb-4">
    <input type="search" id="search-sites" placeholder="Search sites by domain or path…" aria-label="Search websites"
        class="w-full max-w-md rounded-lg border border-slate-300 px-3.5 py-2.5 text-slate-900 placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-shadow">
</div>
<div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-slate-200" id="sites-table">
            <thead class="bg-slate-50">
                <tr>
                    <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Domain</th>
                    <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Path</th>
                    <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Status</th>
                    <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">WordPress</th>
                    <th scope="col" class="px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-200 bg-white">
                {% for site in sites %}
                <tr data-domain="{{ site.domain }}" data-id="{{ site.id }}" class="hover:bg-slate-50/80 transition-colors">
                    <td class="px-4 py-3.5">
                        <a href="/sites/{{ site.id }}" class="font-medium text-blue-600 hover:text-blue-700 hover:underline">{{ site.domain }}</a>
                    </td>
                    <td class="px-4 py-3.5">
                        <code class="path text-sm text-slate-600 bg-slate-100 px-2 py-0.5 rounded font-mono">{{ site.folder_path }}</code>
                    </td>
                    <td class="px-4 py-3.5">
                        <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium
                            {% if site.status == "online" %}bg-emerald-50 text-emerald-700 ring-1 ring-emerald-600/20
                            {% elif site.status == "offline" %}bg-slate-100 text-slate-600 ring-1 ring-slate-200
                            {% else %}bg-amber-50 text-amber-700 ring-1 ring-amber-200{% endif %}">
                            {% if site.status == "unknown" %}—{% else %}{{ site.status }}{% endif %}
                        </span>
                    </td>
                    <td class="px-4 py-3.5 text-sm text-slate-600">{% if site.wordpress_installed %}Yes{% else %}—{% endif %}</td>
                    <td class="px-4 py-3.5 text-right">
                        <a href="/sites/{{ site.id }}" class="inline-flex items-center rounded-lg px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-100 hover:text-slate-900 transition-colors">Details</a>
                        <button type="button" class="btn-delete-site inline-flex items-center rounded-lg px-3 py-1.5 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors" data-id="{{ site.id }}" data-domain="{{ site.domain }}">Delete</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% if sites.is_empty() %}
    <div class="px-6 py-12 text-center">
        <p class="text-slate-500">No websites yet.</p>
        <a href="/sites/new" class="mt-2 inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline">Add your first site</a>
    </div>
    {% endif %}
</div>
{% endblock %}
